<div class="row">
    <div class="columns">
        <h3>{{phrase.get(['booking_details'])}}</h3>
        <table>
            <tr *ngIf="booking.salonId != null">
                <td>{{phrase.get(['salon'])}}</td>
                <td colspan="2">{{selectedSalon.name}} <span *ngIf="selectedRoom != null">({{selectedRoom.name}})</span></td>
            </tr>
            <tr *ngIf="booking.userId != null">
                <td>{{phrase.get(['user'])}}</td>
                <td colspan="2">{{selectedUser.email}}</td>
            </tr>
            <tr *ngIf="booking.customerId != null">
                <td>{{phrase.get(['customer'])}}</td>
                <td colspan="2">{{selectedCustomer.email}}</td>
            </tr>
            <tr *ngIf="booking.serviceId != null">
                <td>{{phrase.get(['service'])}}</td>
                <td colspan="2">{{selectedService.name}}</td>
            </tr>
            <tr *ngIf="booking.startTime != null">
                <td>{{phrase.get(['time'])}}</td>
                <td>{{booking.startTime | date:'dd/M y HH:mm'}} - {{booking.startTime.add(booking.duration) | date:'HH:mm'}}</td>
                <td *ngIf="booking.progress == 75">
                    <material-button raised (trigger)="decreaseDuration()">-</material-button>
                    <material-button raised (trigger)="increaseDuration()">+</material-button>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="row">
    <div class="columns">
        <material-progress [activeProgress]="booking.progress"></material-progress>
    </div>
</div>

<div class="row">
    <div class="columns">
        <div *ngIf="booking.progress == 0">
            <fo-data-table
                    [title]="phrase.get(['pick', 'customer'])"
                    [data]="customerService.tableData"
                    [disabled]="customerService.isLoading"
                    [rows]="5"
                    [medium-hidden-columns]="['name']"
                    [small-hidden-columns]="['name', 'social_number']"
                    (rowclick)="pickCustomer($event)">
            </fo-data-table>
        </div>
        <div *ngIf="booking.progress == 25">
            <fo-data-table
                    [title]="phrase.get(['pick', 'service'])"
                    [data]="availableServices"
                    [disabled]="serviceService.isLoading"
                    [rows]="5"
                    [medium-hidden-columns]="['duration_minutes']"
                    [small-hidden-columns]="['duration_minutes', 'price']"
                    (rowclick)="pickService($event)">
            </fo-data-table>
            <material-select [selection]="addonSelection" class="bordered-list">
                <material-select-item *ngFor="let addon of serviceAddons"
                                      [value]="addon"
                                      displayNameRenderer>
                </material-select-item>
            </material-select>
        </div>
        <div *ngIf="booking.progress == 50">
            <bo-select-time [booking]="booking" (select)="booking.progress = 75"></bo-select-time>
        </div>

        <div *ngIf="booking.progress == 75">
            <h4>{{phrase.get(['booking_confirm'])}}</h4>
            <p>{{phrase.get(['booking_confirm_text'])}}</p>
            <material-toggle
                label="{{phrase.get(['booking_confirmation_send'])}}"
                [(checked)]="sendBookingConfirmation">
            </material-toggle>
        </div>

        <div *ngIf="booking.progress == 100">
            <h4>{{phrase.get(['booking_completed'])}}</h4>
            <p>{{phrase.get(['booking_completed_text'])}}</p>
        </div>
    </div>
</div>

<div class="row" id="nav-buttons">
    <div class="small-6 columns">
        <material-button
            *ngIf="booking.progress > 0 && booking.progress < 100"
            raised
            (trigger)="stepBack()">
        &lt;
        </material-button>
    </div>
    <div class="small-6 columns">
        <material-button
            *ngIf="booking.progress == 75"
            class="float-right"
            raised
            (trigger)="saveBooking()">
            {{phrase.get(['finish'])}}
        </material-button>
    </div>
</div>
