<div class="row">
    <div class="columns">
        <h2 class="text-center">[{{customer?.email}}]</h2>
    </div>
</div>
<div class="row" *ngIf="customer != null">
    <div class="columns">
        <material-tab-panel>
            <material-tab label="{{phrase.get(['customer_details'])}}">
                <form [ngFormModel]="details.form">
                    <bo-customer-details
                            #details
                            [customer]="customer">
                    </bo-customer-details>
                    <div class="row">
                        <div class="columns">
                            <material-button
                                raised
                                [disabled]="customerService.isLoading"
                                (trigger)="save()">
                                {{phrase.get(['save'])}}
                            </material-button>
                            <material-button
                                raised
                                [disabled]="customerService.isLoading"
                                (trigger)="cancel()">
                                {{phrase.get(['cancel'])}}
                            </material-button>
                        </div>
                    </div>
                </form>
            </material-tab>
            <material-tab label="{{phrase.get(['booking_plural'])}}">
                <div>
                    <fo-data-table
                            [data]="customerBookings"
                            [disabled]="bookingService.isLoading"
                            [rows]="10"
                            [medium-hidden-columns]="[phrase.get(['duration_minutes']), phrase.get(['user'])]"
                            [small-hidden-columns]="[phrase.get(['duration_minutes']), phrase.get(['user']), phrase.get(['salon'])]"
                            (rowclick)="selectedBookingId = $event">
                    </fo-data-table>
                    <bo-booking-details [booking]="bookingService.getModel(selectedBookingId)"></bo-booking-details>
                </div>
            </material-tab>
            <material-tab label="{{phrase.get(['journal'])}}" *ngIf="bufferJournalEntry != null">
                <div class="row">
                    <div class="columns">
                        <material-expansionpanel name="Expansion panel">
                            <div>
                                Oh hi. I was just trying not to take too much space here.
                            </div>
                        </material-expansionpanel>
                    </div>
                </div>
                <div class="row">
                    <div class="columns">
                        <hr />
                    </div>
                    <div class="small-6 columns">
                        <material-input
                                multiline rows="5"
                                [maxCount]="16000"
                                [label]="phrase.get(['comments_external'])"
                                floatingLabel
                                [(ngModel)]="bufferJournalEntry.commentsExternal">
                        </material-input>
                    </div>
                    <div class="small-6 columns">
                        <material-input
                                multiline rows="5"
                                [maxCount]="16000"
                                [label]="phrase.get(['comments_internal'])"
                                floatingLabel
                                [(ngModel)]="bufferJournalEntry.commentsInternal">
                        </material-input>
                    </div>
                </div>
                <div class="row">
                    <div class="columns text-center">
                        <h3>
                            {{phrase.get(['picture_plural'])}}
                            <material-fab mini raised (trigger)="journalImageCounter.add(journalImageCounter.length)" class="float-right"><glyph icon="add"></glyph></material-fab>
                        </h3>
                    </div>
                    <div class="columns" *ngFor="let i of journalImageCounter">
                        <fo-image-file (loaded)="addImage($event)"></fo-image-file>
                    </div>
                </div>
                <div class="row">
                    <div class="columns">
                        <material-button raised class="float-right" (trigger)="pushJournalEntry()">{{phrase.get(['save', 'entry'])}}</material-button>
                    </div>
                </div>
            </material-tab>
        </material-tab-panel>
    </div>
</div>

