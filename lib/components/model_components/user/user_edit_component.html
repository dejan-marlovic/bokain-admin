<div class="row" *ngIf="user != null">
    <div class="columns">
        <material-tab-panel>
            <material-tab label="{{phrase.get(['user_details'])}}">
                <form [ngFormModel]="details.form">
                    <bo-user-details
                        #details
                        [user]="user">
                    </bo-user-details>
                    <material-button
                        raised
                        [disabled]="userService.isLoading"
                        (trigger)="save()">
                        {{phrase.get(['save'])}}
                    </material-button>
                    <material-button
                        raised
                        [disabled]="userService.isLoading"
                        (trigger)="cancel()">
                        {{phrase.get(['cancel'])}}
                    </material-button>
                </form>
            </material-tab>
            <material-tab label="{{phrase.get(['booking_plural'])}}">
                <div>
                    <fo-data-table
                        [no-results-message]="phrase.get(['no_results'])"
                        [models]="bookingService.getModelsAsMap(user.bookingIds, true)"
                        [disabled]="bookingService.isLoading"
                        [rows]="10"
                        [medium-hidden-columns]="[phrase.get(['duration_minutes'])]"
                        [small-hidden-columns]="[phrase.get(['duration_minutes']), phrase.get(['salon'])]"
                        (rowclick)="selectedBookingId = $event">
                    </fo-data-table>
                    <bo-booking-details [booking]="bookingService.getModel(selectedBookingId)"></bo-booking-details>
                </div>
            </material-tab>
            <material-tab label="{{phrase.get(['customer_plural'])}}">
                <div>
                    <bo-associative-table
                        [sourceModels]="customerService.getModelsAsMap(null, true)"
                        [selectedIds]="user.customerIds"
                        (fo-select)="addCustomer($event)"
                        (fo-unselect)="removeCustomer($event)">
                    </bo-associative-table>
                </div>
            </material-tab>
            <material-tab label="{{phrase.get(['salon_plural'])}}">
                <div>
                    <bo-associative-table
                        [sourceModels]="salonService.getModelsAsMap(null, true)"
                        [selectedIds]="user.salonIds"
                        (fo-select)="addSalon($event)"
                        (fo-unselect)="removeSalon($event)">
                    </bo-associative-table>
                </div>
            </material-tab>
            <material-tab label="{{phrase.get(['service_plural'])}}">
                <div>
                    <bo-associative-table
                            [sourceModels]="serviceService.getModelsAsMap(null, true)"
                            [selectedIds]="user.serviceIds"
                            (fo-select)="addService($event)"
                            (fo-unselect)="removeService($event)">
                    </bo-associative-table>
                </div>
            </material-tab>
        </material-tab-panel>
    </div>
</div>