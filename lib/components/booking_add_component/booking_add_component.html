<div class="row">
    <div class="columns">
        <h3>{{phrase.get(['booking_details'])}}</h3>
        <table>
            <tr>
                <td>{{phrase.get(['salon'])}}</td>
                <material-dropdown-select
                        [disabled]="booking.progress >= 75"
                        [selection]="salonSelection"
                        [buttonText]="salonSelectLabel"
                        [options]="salonOptions">
                </material-dropdown-select>
                <td *ngIf="selectedRoom != null">({{selectedRoom.name}})</td>
            </tr>
            <tr>
                <td>{{phrase.get(['user'])}}</td>
                <material-dropdown-select
                        [disabled]="booking.progress >= 75"
                        [selection]="userSelection"
                        [buttonText]="userSelectLabel"
                        [options]="userOptions">
                </material-dropdown-select>
            </tr>
            <tr>
                <td>{{phrase.get(['customer'])}}</td>
                <td colspan="2">{{selectedCustomer?.email}}</td>
            </tr>
            <tr>
                <td>{{phrase.get(['service'])}}</td>
                <td colspan="2">{{selectedService?.name}}&nbsp;<span *ngIf="formattedDurationAndPrice.isNotEmpty">({{formattedDurationAndPrice}})</span></td>
            </tr>
            <tr>
                <td>{{phrase.get(['time'])}}</td>
                <td *ngIf="booking.startTime != null && booking.duration != null">{{booking.startTime | date:'dd/M y HH:mm'}} - {{booking.startTime.add(booking.duration) | date:'HH:mm'}}</td>
                <td *ngIf="booking.progress == 75">
                    <material-button icon (trigger)="decreaseDuration()"><glyph icon="remove"></glyph></material-button>
                    <material-button icon (trigger)="increaseDuration()"><glyph icon="add"></glyph></material-button>
                </td>
            </tr>
        </table>
    </div>
</div>
<div class="row">
    <div class="columns">
        <material-progress [activeProgress]="booking.progress" [secondaryProgress]="booking.secondaryProgress"></material-progress>
    </div>
</div>
<div class="row">
    <div class="columns">
        <div *ngIf="booking.progress == 0">
            <fo-data-table
                    [title]="phrase.get(['pick', 'customer'])"
                    [data]="customerService.tableData"
                    [disabled]="customerService.isLoading"
                    [rows]="5"
                    [medium-hidden-columns]="['name']"
                    [small-hidden-columns]="['name', 'social_number']"
                    (rowclick)="pickCustomer($event)">
            </fo-data-table>
        </div>
        <div *ngIf="booking.progress == 25">
            <fo-data-table
                    [title]="phrase.get(['pick', 'service'])"
                    [data]="availableServices"
                    [disabled]="serviceService.isLoading"
                    [rows]="5"
                    [medium-hidden-columns]="['duration_minutes']"
                    [small-hidden-columns]="['duration_minutes', 'price']"
                    (rowclick)="pickService($event)">
            </fo-data-table>
            <material-dropdown-select
                [disabled]="serviceAddons == null"
                [selection]="addonSelection"
                [buttonText]="phrase.get(['service_addon_plural'])"
                [options]="serviceAddons">
            </material-dropdown-select>
        </div>
        <div *ngIf="booking.progress == 50">
            <bo-select-time [booking]="booking" (select)="booking.secondaryProgress = 75"></bo-select-time>
        </div>
        <div *ngIf="booking.progress == 75">
            <h4>{{phrase.get(['booking_confirm'])}}</h4>
            <material-toggle
                label="{{phrase.get(['booking_confirmation_send'])}}"
                [(checked)]="sendBookingConfirmation">
            </material-toggle>
            <p>{{phrase.get(['booking_confirm_text'])}}</p>
        </div>
        <div *ngIf="booking.progress == 100">
            <h4>{{phrase.get(['booking_completed'])}}</h4>
            <p>{{phrase.get(['booking_completed_text'])}}</p>
        </div>
    </div>
</div>
<div class="row" id="nav-buttons">
    <div class="small-6 columns">
        <material-button
            *ngIf="booking.progress > 0 && booking.progress < 100"
            icon
            raised
            (trigger)="stepBack()">
            <glyph icon="arrow_back"></glyph>
        </material-button>
    </div>
    <div class="small-6 columns">
        <material-button
            *ngIf="booking.progress < 100"
            icon
            [disabled]="nextStepDisabled"
            class="float-right"
            raised
            (trigger)="stepForward()">
            <glyph icon="arrow_forward"></glyph>
        </material-button>
    </div>
</div>
